
/*!
 * Viewer.js v0.7.1
 * https://github.com/fengyuanchen/viewerjs
 *
 * Copyright (c) 2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-05-14T07:05:32.049Z
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.Viewer=a())}(this,(function(){var bc={inline:false,button:true,navbar:true,title:true,toolbar:true,tooltip:true,movable:true,zoomable:true,rotatable:true,scalable:true,transition:true,fullscreen:true,keyboard:true,interval:5000,minWidth:200,minHeight:100,zoomRatio:0.1,minZoomRatio:0.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null};var aZ='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li role="button" class="viewer-zoom-in" data-action="zoom-in"></li><li role="button" class="viewer-zoom-out" data-action="zoom-out"></li><li role="button" class="viewer-one-to-one" data-action="one-to-one"></li><li role="button" class="viewer-reset" data-action="reset"></li><li role="button" class="viewer-prev" data-action="prev"></li><li role="button" class="viewer-play" data-action="play"></li><li role="button" class="viewer-next" data-action="next"></li><li role="button" class="viewer-rotate-left" data-action="rotate-left"></li><li role="button" class="viewer-rotate-right" data-action="rotate-right"></li><li role="button" class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li role="button" class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>';var ap=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(bs){return typeof bs}:function(bs){return bs&&typeof Symbol==="function"&&bs.constructor===Symbol&&bs!==Symbol.prototype?"symbol":typeof bs};var j=function(bs,bt){if(!(bs instanceof bt)){throw new TypeError("Cannot call a class as a function")}};var bl=function(){function bs(bw,bu){for(var bt=0;bt<bu.length;bt++){var bv=bu[bt];bv.enumerable=bv.enumerable||false;bv.configurable=true;if("value" in bv){bv.writable=true}Object.defineProperty(bw,bv.key,bv)}}return function(bv,bt,bu){if(bt){bs(bv.prototype,bt)}if(bu){bs(bv,bu)}return bv}}();var aQ=function aQ(bt,bw,bv){if(bt===null){bt=Function.prototype}var bx=Object.getOwnPropertyDescriptor(bt,bw);if(bx===undefined){var bu=Object.getPrototypeOf(bt);if(bu===null){return undefined}else{return aQ(bu,bw,bv)}}else{if("value" in bx){return bx.value}else{var bs=bx.get;if(bs===undefined){return undefined}return bs.call(bv)}}};var P=function P(bs,bw,bv,bu){var bx=Object.getOwnPropertyDescriptor(bs,bw);if(bx===undefined){var bt=Object.getPrototypeOf(bs);if(bt!==null){P(bt,bw,bv,bu)}}else{if("value" in bx&&bx.writable){bx.value=bv}else{var by=bx.set;if(by!==undefined){by.call(bu,bv)}}}return bv};var aB=/([a-z\d])([A-Z])/g;var S=/\s+/;var a0=/^(width|height|left|top|marginLeft|marginTop)$/;var ay=/^\s+(.*)\s+$/;var a9=Object.prototype;var aG=a9.toString;var aA=a9.hasOwnProperty;var B=Array.prototype.slice;function aI(bs){return aG.call(bs).slice(8,-1).toLowerCase()}function bg(bs){return typeof bs==="string"}function X(bs){return typeof bs==="number"&&!isNaN(bs)}function aa(bs){return typeof bs==="undefined"}function J(bs){return(typeof bs==="undefined"?"undefined":ap(bs))==="object"&&bs!==null}function I(bu){if(!J(bu)){return false}try{var bv=bu.constructor;var bs=bv.prototype;return bv&&bs&&aA.call(bs,"isPrototypeOf")}catch(bt){return false}}function a3(bs){return aI(bs)==="function"}function c(bs){return Array.isArray?Array.isArray(bs):aI(bs)==="array"}function aU(bs,bt){bt=bt>=0?bt:0;if(Array.from){return Array.from(bs).slice(bt)}return B.call(bs,bt)}function z(bu,bs){var bt=-1;if(bs.indexOf){return bs.indexOf(bu)}bs.forEach(function(bw,bv){if(bw===bu){bt=bv}});return bt}function a5(bs){if(bg(bs)){bs=bs.trim?bs.trim():bs.replace(ay,"1")}return bs}function bo(bu,bv){if(bu&&a3(bv)){var bs=void 0;if(c(bu)||X(bu.length)){var bt=bu.length;for(bs=0;bs<bt;bs++){if(bv.call(bu,bu[bs],bs,bu)===false){break}}}else{if(J(bu)){Object.keys(bu).forEach(function(bw){bv.call(bu,bu[bw],bw,bu)})}}}return bu}function au(bv){for(var bs=arguments.length,bt=Array(bs>1?bs-1:0),bu=1;bu<bs;bu++){bt[bu-1]=arguments[bu]}if(J(bv)&&bt.length>0){if(Object.assign){return Object.assign.apply(Object,[bv].concat(bt))}bt.forEach(function(bw){if(J(bw)){Object.keys(bw).forEach(function(bx){bv[bx]=bw[bx]})}})}return bv}function G(bw,bv){for(var bs=arguments.length,bu=Array(bs>2?bs-2:0),bt=2;bt<bs;bt++){bu[bt-2]=arguments[bt]}return function(){for(var bz=arguments.length,by=Array(bz),bx=0;bx<bz;bx++){by[bx]=arguments[bx]}return bw.apply(bv,bu.concat(by))}}function H(bs,bu){var bt=bs.style;bo(bu,function(bw,bv){if(a0.test(bv)&&X(bw)){bw+="px"}bt[bv]=bw})}function aM(bs){return window.getComputedStyle?window.getComputedStyle(bs,null):bs.currentStyle}function br(bs,bt){return bs.classList?bs.classList.contains(bt):bs.className.indexOf(bt)>-1}function be(bs,bu){if(!bu){return}if(X(bs.length)){bo(bs,function(bv){be(bv,bu)});return}if(bs.classList){bs.classList.add(bu);return}var bt=a5(bs.className);if(!bt){bs.className=bu}else{if(bt.indexOf(bu)<0){bs.className=bt+" "+bu}}}function bj(bs,bt){if(!bt){return}if(X(bs.length)){bo(bs,function(bu){bj(bu,bt)});return}if(bs.classList){bs.classList.remove(bt);return}if(bs.className.indexOf(bt)>=0){bs.className=bs.className.replace(bt,"")}}function A(bs,bu,bt){if(!bu){return}if(X(bs.length)){bo(bs,function(bv){A(bv,bu,bt)});return}if(bt){be(bs,bu)}else{bj(bs,bu)}}function a7(bs){return bs.replace(aB,"$1-$2").toLowerCase()}function bm(bt,bs){if(J(bt[bs])){return bt[bs]}else{if(bt.dataset){return bt.dataset[bs]}}return bt.getAttribute("data-"+a7(bs))}function aY(bt,bs,bu){if(J(bu)){bt[bs]=bu}else{if(bt.dataset){bt.dataset[bs]=bu}else{bt.setAttribute("data-"+a7(bs),bu)}}}function Z(bt,bs){if(J(bt[bs])){delete bt[bs]}else{if(bt.dataset){try{delete bt.dataset[bs]}catch(bu){bt.dataset[bs]=null}}else{bt.removeAttribute("data-"+a7(bs))}}}function F(bt,bv,bu){var bs=a5(bv).split(S);if(bs.length>1){bo(bs,function(bw){F(bt,bw,bu)});return}if(bt.removeEventListener){bt.removeEventListener(bv,bu,false)}else{if(bt.detachEvent){bt.detachEvent("on"+bv,bu)}}}function a(bv,by,bt,bx){var bu=a5(by).split(S);var bs=bt;if(bu.length>1){bo(bu,function(bz){a(bv,bz,bt)});return}if(bx){bt=function bw(){for(var bB=arguments.length,bA=Array(bB),bz=0;bz<bB;bz++){bA[bz]=arguments[bz]}F(bv,by,bt);return bs.apply(bv,bA)}}if(bv.addEventListener){bv.addEventListener(by,bt,false)}else{if(bv.attachEvent){bv.attachEvent("on"+by,bt)}}}function aD(bs,bt,bv){if(bs.dispatchEvent){var bu=void 0;if(a3(Event)&&a3(CustomEvent)){if(aa(bv)){bu=new Event(bt,{bubbles:true,cancelable:true})}else{bu=new CustomEvent(bt,{detail:bv,bubbles:true,cancelable:true})}}else{if(aa(bv)){bu=document.createEvent("Event");bu.initEvent(bt,true,true)}else{bu=document.createEvent("CustomEvent");bu.initCustomEvent(bt,true,true,bv)}}return bs.dispatchEvent(bu)}else{if(bs.fireEvent){return bs.fireEvent("on"+bt)}}return true}function az(bt){var bw=bt||window.event;if(!bw.target){bw.target=bw.srcElement||document}if(!X(bw.pageX)&&X(bw.clientX)){var bu=bt.target.ownerDocument||document;var bv=bu.documentElement;var bs=bu.body;bw.pageX=bw.clientX+((bv&&bv.scrollLeft||bs&&bs.scrollLeft||0)-(bv&&bv.clientLeft||bs&&bs.clientLeft||0));bw.pageY=bw.clientY+((bv&&bv.scrollTop||bs&&bs.scrollTop||0)-(bv&&bv.clientTop||bs&&bs.clientTop||0))}return bw}function a6(bs){var bu=document.documentElement;var bt=bs.getBoundingClientRect();return{left:bt.left+((window.scrollX||bu&&bu.scrollLeft||0)-(bu&&bu.clientLeft||0)),top:bt.top+((window.scrollY||bu&&bu.scrollTop||0)-(bu&&bu.clientTop||0))}}function bq(bt,bs){return bt.getElementsByTagName(bs)}function bk(bs,bt){return bs.getElementsByClassName?bs.getElementsByClassName(bt):bs.querySelectorAll("."+bt)}function a1(bs,bt){if(bt.length){bo(bt,function(bu){a1(bs,bu)});return}bs.appendChild(bt)}function aV(bs){if(bs.parentNode){bs.parentNode.removeChild(bs)}}function a4(bs){while(bs.firstChild){bs.removeChild(bs.firstChild)}}function M(bs,bt){if(!aa(bs.textContent)){bs.textContent=bt}else{bs.innerText=bt}}function b(bs){return bs.offsetWidth}function Y(bs){return bg(bs)?bs.replace(/^.*\//,"").replace(/[?&#].*$/,""):""}function u(bt,bv){if(bt.naturalWidth){bv(bt.naturalWidth,bt.naturalHeight);return}var bu=document.createElement("img");bu.onload=function bs(){bv(this.width,this.height)};bu.src=bt.src}function aK(bw){var bv=[];var bu=bw.rotate;var bt=bw.scaleX;var bs=bw.scaleY;if(X(bu)&&bu!==0){bv.push("rotate("+bu+"deg)")}if(X(bt)&&bt!==1){bv.push("scaleX("+bt+")")}if(X(bs)&&bs!==1){bv.push("scaleY("+bs+")")}return bv.length?bv.join(" "):"none"}function aj(bs){switch(bs){case 2:return"viewer-hide-xs-down";case 3:return"viewer-hide-sm-down";case 4:return"viewer-hide-md-down"}return""}function V(bu,bt){var bs={endX:bu.pageX,endY:bu.pageY};if(bt){return bs}return au({startX:bu.pageX,startY:bu.pageY},bs)}function bh(bs){var bu=au({},bs);var bt=[];bo(bs,function(bw,bv){delete bu[bv];bo(bu,function(bx){var bz=Math.abs(bw.startX-bx.startX);var bC=Math.abs(bw.startY-bx.startY);var by=Math.abs(bw.endX-bx.endX);var bA=Math.abs(bw.endY-bx.endY);var bE=Math.sqrt(bz*bz+bC*bC);var bD=Math.sqrt(by*by+bA*bA);var bB=(bD-bE)/bE;bt.push(bB)})});bt.sort(function(bw,bv){return Math.abs(bw)<Math.abs(bv)});return bt[0]}function aN(bs){var bu=0;var bt=0;var bv=0;bo(bs,function(bw){bu+=bw.startX;bt+=bw.startY;bv+=1});bu/=bv;bt/=bv;return{pageX:bu,pageY:bt}}var ac={render:function af(){var bs=this;bs.initContainer();bs.initViewer();bs.initList();bs.renderViewer()},initContainer:function w(){var bs=this;bs.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function bd(){var bs=this;var bt=bs.options;var bu=bs.parent;var bv=void 0;if(bt.inline){bs.parentData=bv={width:Math.max(bu.offsetWidth,bt.minWidth),height:Math.max(bu.offsetHeight,bt.minHeight)}}if(bs.fulled||!bv){bv=bs.containerData}bs.viewerData=au({},bv)},renderViewer:function ah(){var bs=this;if(bs.options.inline&&!bs.fulled){H(bs.viewer,bs.viewerData)}},initList:function E(){var bt=this;var bu=bt.options;var bv=bt.element;var bw=bt.list;var bs=[];bo(bt.images,function(bA,by){var bB=bA.src;var bz=bA.alt||Y(bB);var bx=bu.url;if(!bB){return}if(bg(bx)){bx=bA.getAttribute(bx)}else{if(a3(bx)){bx=bx.call(bA,bA)}}bs.push("<li><img"+(' src="'+bB+'"')+' role="button" data-action="view"'+(' data-index="'+by+'"')+(' data-original-url="'+(bx||bB)+'"')+(' alt="'+bz+'"')+"></li>")});bw.innerHTML=bs.join("");bo(bq(bw,"img"),function(bx){aY(bx,"filled",true);a(bx,"load",G(bt.loadImage,bt),true)});bt.items=bq(bw,"li");if(bu.transition){a(bv,"viewed",function(){be(bw,"viewer-transition")},true)}},renderList:function aX(bt){var bs=this;var bu=bt||bs.index;var bv=bs.items[bu].offsetWidth||30;var bw=bv+1;H(bs.list,{width:bw*bs.length,marginLeft:(bs.viewerData.width-bv)/2-bw*bu})},resetList:function R(){var bs=this;a4(bs.list);bj(bs.list,"viewer-transition");H({marginLeft:0})},initImage:function aO(by){var bz=this;var bA=bz.options;var bv=bz.image;var bs=bz.viewerData;var bx=bz.footer.offsetHeight;var bu=bs.width;var bw=Math.max(bs.height-bx,bx);var bt=bz.imageData||{};u(bv,function(bD,bG){var bF=bD/bG;var bE=bu;var bC=bw;if(bw*bF>bu){bC=bu/bF}else{bE=bw*bF}bE=Math.min(bE*0.9,bD);bC=Math.min(bC*0.9,bG);var bH={naturalWidth:bD,naturalHeight:bG,aspectRatio:bF,ratio:bE/bD,width:bE,height:bC,left:(bu-bE)/2,top:(bw-bC)/2};var bB=au({},bH);if(bA.rotatable){bH.rotate=bt.rotate||0;bB.rotate=0}if(bA.scalable){bH.scaleX=bt.scaleX||1;bH.scaleY=bt.scaleY||1;bB.scaleX=1;bB.scaleY=1}bz.imageData=bH;bz.initialImageData=bB;if(a3(by)){by()}})},renderImage:function s(bw){var bs=this;var bu=bs.image;var bv=bs.imageData;var bt=aK(bv);H(bu,{width:bv.width,height:bv.height,marginLeft:bv.left,marginTop:bv.top,WebkitTransform:bt,msTransform:bt,transform:bt});if(a3(bw)){if(bs.transitioning){a(bu,"transitionend",bw,true)}else{bw()}}},resetImage:function p(){var bs=this;if(bs.image){aV(bs.image);bs.image=null}}};var L=typeof window!=="undefined"?window.PointerEvent:null;var bp=L?"pointerdown":"touchstart mousedown";var W=L?"pointermove":"mousemove touchmove";var ax=L?"pointerup pointercancel":"touchend touchcancel mouseup";var e="wheel mousewheel DOMMouseScroll";var i="keydown";var aw="dragstart";var n="click";var ad="resize";var at="view";var bn="viewed";var D={bind:function a8(){var bs=this;var bt=bs.options;var bu=bs.element;var bv=bs.viewer;if(a3(bt.view)){a(bu,at,bt.view)}if(a3(bt.viewed)){a(bu,bn,bt.viewed)}a(bv,n,bs.onClick=G(bs.click,bs));a(bv,e,bs.onWheel=G(bs.wheel,bs));a(bv,aw,bs.onDragstart=G(bs.dragstart,bs));a(bs.canvas,bp,bs.onPointerdown=G(bs.pointerdown,bs));a(document,W,bs.onPointermove=G(bs.pointermove,bs));a(document,ax,bs.onPointerup=G(bs.pointerup,bs));a(document,i,bs.onKeydown=G(bs.keydown,bs));a(window,ad,bs.onResize=G(bs.resize,bs))},unbind:function U(){var bs=this;var bt=bs.options;var bu=bs.element;var bv=bs.viewer;if(a3(bt.view)){F(bu,at,bt.view)}if(a3(bt.viewed)){F(bu,bn,bt.viewed)}F(bv,n,bs.onClick);F(bv,e,bs.onWheel);F(bv,aw,bs.onDragstart);F(bs.canvas,bp,bs.onPointerdown);F(document,W,bs.onPointermove);F(document,ax,bs.onPointerup);F(document,i,bs.onKeydown);F(window,ad,bs.onResize)}};var d={start:function t(bt){var bs=this;var bv=az(bt);var bu=bv.target;if(bu.tagName.toLowerCase()==="img"){bs.target=bu;bs.show()}},click:function y(bt){var bs=this;var bw=az(bt);var bv=bw.target;var bu=bm(bv,"action");var bx=bs.imageData;switch(bu){case"mix":if(bs.played){bs.stop()}else{if(bs.options.inline){if(bs.fulled){bs.exit()}else{bs.full()}}else{bs.hide()}}break;case"view":bs.view(bm(bv,"index"));break;case"zoom-in":bs.zoom(0.1,true);break;case"zoom-out":bs.zoom(-0.1,true);break;case"one-to-one":bs.toggle();break;case"reset":bs.reset();break;case"prev":bs.prev();break;case"play":bs.play();break;case"next":bs.next();break;case"rotate-left":bs.rotate(-90);break;case"rotate-right":bs.rotate(90);break;case"flip-horizontal":bs.scaleX(-bx.scaleX||-1);break;case"flip-vertical":bs.scaleY(-bx.scaleY||-1);break;default:if(bs.played){bs.stop()}}},load:function g(){var bs=this;var bu=bs.options;var bv=bs.image;var bt=bs.index;var bw=bs.viewerData;if(bs.timeout){clearTimeout(bs.timeout);bs.timeout=false}bj(bv,"viewer-invisible");bv.style.cssText="width:0;height:0;"+("margin-left:"+bw.width/2+"px;")+("margin-top:"+bw.height/2+"px;")+"max-width:none!important;visibility:visible;";bs.initImage(function(){A(bv,"viewer-transition",bu.transition);A(bv,"viewer-move",bu.movable);bs.renderImage(function(){bs.viewed=true;aD(bs.element,"viewed",{originalImage:bs.images[bt],index:bt,image:bv})})})},loadImage:function ak(bv){var by=az(bv);var bx=by.target;var bu=bx.parentNode;var bt=bu.offsetWidth||30;var bs=bu.offsetHeight||50;var bw=!!bm(bx,"filled");u(bx,function(bA,bD){var bC=bA/bD;var bB=bt;var bz=bs;if(bs*bC>bt){if(bw){bB=bs*bC}else{bz=bt/bC}}else{if(bw){bz=bt/bC}else{bB=bs*bC}}H(bx,{width:bB,height:bz,marginLeft:(bt-bB)/2,marginTop:(bs-bz)/2})})},resize:function o(){var bs=this;bs.initContainer();bs.initViewer();bs.renderViewer();bs.renderList();if(bs.viewed){bs.initImage(function(){bs.renderImage()})}if(bs.played){bo(bq(bs.player,"img"),function(bt){a(bt,"load",G(bs.loadImage,bs),true);aD(bt,"load")})}},wheel:function r(bu){var bs=this;var bv=az(bu);if(!bs.viewed){return}bv.preventDefault();if(bs.wheeling){return}bs.wheeling=true;setTimeout(function(){bs.wheeling=false},50);var bt=Number(bs.options.zoomRatio)||0.1;var bw=1;if(bv.deltaY){bw=bv.deltaY>0?1:-1}else{if(bv.wheelDelta){bw=-bv.wheelDelta/120}else{if(bv.detail){bw=bv.detail>0?1:-1}}}bs.zoom(-bw*bt,true,bv)},keydown:function l(bv){var bs=this;var bw=az(bv);var bt=bs.options;var bu=bw.keyCode||bw.which||bw.charCode;if(!bs.fulled||!bt.keyboard){return}switch(bu){case 27:if(bs.played){bs.stop()}else{if(bt.inline){if(bs.fulled){bs.exit()}}else{bs.hide()}}break;case 32:if(bs.played){bs.stop()}break;case 37:bs.prev();break;case 38:bw.preventDefault();bs.zoom(bt.zoomRatio,true);break;case 39:bs.next();break;case 40:bw.preventDefault();bs.zoom(-bt.zoomRatio,true);break;case 48:case 49:if(bw.ctrlKey||bw.shiftKey){bw.preventDefault();bs.toggle()}break}},dragstart:function h(bs){if(bs.target.tagName.toLowerCase()==="img"){bs.preventDefault()}},pointerdown:function C(bv){var bt=this;var bu=bt.options;var bs=bt.pointers;var bx=az(bv);if(!bt.viewed){return}if(bx.changedTouches){bo(bx.changedTouches,function(by){bs[by.identifier]=V(by)})}else{bs[bx.pointerId||0]=V(bx)}var bw=bu.movable?"move":false;if(Object.keys(bs).length>1){bw="zoom"}else{if((bx.pointerType==="touch"||bx.type==="touchmove")&&bt.isSwitchable()){bw="switch"}}bt.action=bw},pointermove:function aJ(bv){var bt=this;var bu=bt.options;var bs=bt.pointers;var by=az(bv);var bw=bt.action;var bx=bt.image;if(!bt.viewed||!bw){return}by.preventDefault();if(by.changedTouches){bo(by.changedTouches,function(bz){au(bs[bz.identifier],V(bz,true))})}else{au(bs[by.pointerId||0],V(by,true))}if(bw==="move"&&bu.transition&&br(bx,"viewer-transition")){bj(bx,"viewer-transition")}bt.change(by)},pointerup:function O(bu){var bt=this;var bs=bt.pointers;var bw=az(bu);var bv=bt.action;if(!bt.viewed){return}if(bw.changedTouches){bo(bw.changedTouches,function(bx){delete bs[bx.identifier]})}else{delete bs[bw.pointerId||0]}if(!bv){return}if(bv==="move"&&bt.options.transition){be(bt.image,"viewer-transition")}bt.action=false}};var a2={show:function k(){var bs=this;var bt=bs.options;var bu=bs.element;if(bt.inline||bs.transitioning){return bs}if(!bs.ready){bs.build()}if(a3(bt.show)){a(bu,"show",bt.show,true)}if(aD(bu,"show")===false){return bs}bs.open();var bv=bs.viewer;bj(bv,"viewer-hide");a(bu,"shown",function(){bs.view(bs.target?z(bs.target,aU(bs.images)):bs.index);bs.target=false},true);if(bt.transition){bs.transitioning=true;be(bv,"viewer-transition");b(bv);a(bv,"transitionend",G(bs.shown,bs),true);be(bv,"viewer-in")}else{be(bv,"viewer-in");bs.shown()}return bs},hide:function aC(){var bs=this;var bt=bs.options;var bu=bs.element;var bv=bs.viewer;if(bt.inline||bs.transitioning||!bs.visible){return bs}if(a3(bt.hide)){a(bu,"hide",bt.hide,true)}if(aD(bu,"hide")===false){return bs}if(bs.viewed&&bt.transition){bs.transitioning=true;a(bs.image,"transitionend",function(){a(bv,"transitionend",G(bs.hidden,bs),true);bj(bv,"viewer-in")},true);bs.zoomTo(0,false,false,true)}else{bj(bv,"viewer-in");bs.hidden()}return bs},view:function aS(by){var bB=this;var bv=bB.element;var bz=bB.title;var bt=bB.canvas;by=Number(by)||0;if(!bB.ready||!bB.visible||bB.played||by<0||by>=bB.length||bB.viewed&&by===bB.index){return bB}var bA=bB.items[by];var bw=bq(bA,"img")[0];var bs=bm(bw,"originalUrl");var bx=bw.getAttribute("alt");var bu=document.createElement("img");bu.src=bs;bu.alt=bx;if(aD(bv,"view",{originalImage:bB.images[by],index:by,image:bu})===false){return bB}bB.image=bu;if(bB.viewed){bj(bB.items[bB.index],"viewer-active")}be(bA,"viewer-active");bB.viewed=false;bB.index=by;bB.imageData=null;be(bu,"viewer-invisible");a4(bt);a1(bt,bu);bB.renderList();a4(bz);a(bv,"viewed",function(){var bC=bB.imageData;M(bz,bx+" ("+bC.naturalWidth+" \xD7 "+bC.naturalHeight+")")},true);if(bu.complete){bB.load()}else{a(bu,"load",G(bB.load,bB),true);if(bB.timeout){clearTimeout(bB.timeout)}bB.timeout=setTimeout(function(){bj(bu,"viewer-invisible");bB.timeout=false},1000)}return bB},prev:function K(){var bs=this;bs.view(Math.max(bs.index-1,0));return bs},next:function av(){var bs=this;bs.view(Math.min(bs.index+1,bs.length-1));return bs},move:function aH(bs,bv){var bt=this;var bu=bt.imageData;bt.moveTo(aa(bs)?bs:bu.left+Number(bs),aa(bv)?bv:bu.top+Number(bv));return bt},moveTo:function aT(bs,bw){var bt=this;var bv=bt.imageData;if(aa(bw)){bw=bs}bs=Number(bs);bw=Number(bw);if(bt.viewed&&!bt.played&&bt.options.movable){var bu=false;if(X(bs)){bv.left=bs;bu=true}if(X(bw)){bv.top=bw;bu=true}if(bu){bt.renderImage()}}return bt},zoom:function m(bv,bu,bs){var bt=this;var bw=bt.imageData;bv=Number(bv);if(bv<0){bv=1/(1-bv)}else{bv=1+bv}bt.zoomTo(bw.width*bv/bw.naturalWidth,bu,bs);return bt},zoomTo:function Q(bA,bB,bC,bv){var bE=this;var bF=bE.options;var bD=bE.pointers;var bu=bE.imageData;bA=Math.max(0,bA);if(X(bA)&&bE.viewed&&!bE.played&&(bv||bF.zoomable)){if(!bv){var bw=Math.max(0.01,bF.minZoomRatio);var bz=Math.min(100,bF.maxZoomRatio);bA=Math.min(Math.max(bA,bw),bz)}if(bA>0.95&&bA<1.05){bA=1}var by=bu.naturalWidth*bA;var bt=bu.naturalHeight*bA;if(bC){var bx=a6(bE.viewer);var bs=bD&&Object.keys(bD).length?aN(bD):{pageX:bC.pageX,pageY:bC.pageY};bu.left-=(by-bu.width)*((bs.pageX-bx.left-bu.left)/bu.width);bu.top-=(bt-bu.height)*((bs.pageY-bx.top-bu.top)/bu.height)}else{bu.left-=(by-bu.width)/2;bu.top-=(bt-bu.height)/2}bu.width=by;bu.height=bt;bu.ratio=bA;bE.renderImage();if(bB){bE.tooltip()}}return bE},rotate:function ae(bt){var bs=this;bs.rotateTo((bs.imageData.rotate||0)+Number(bt));return bs},rotateTo:function bf(bt){var bs=this;var bu=bs.imageData;bt=Number(bt);if(X(bt)&&bs.viewed&&!bs.played&&bs.options.rotatable){bu.rotate=bt;bs.renderImage()}return bs},scale:function aW(bu,bt){var bs=this;var bw=bs.imageData;if(aa(bt)){bt=bu}bu=Number(bu);bt=Number(bt);if(bs.viewed&&!bs.played&&bs.options.scalable){var bv=false;if(X(bu)){bw.scaleX=bu;bv=true}if(X(bt)){bw.scaleY=bt;bv=true}if(bv){bs.renderImage()}}return bs},scaleX:function ao(bt){var bs=this;bs.scale(bt,bs.imageData.scaleY);return bs},scaleY:function an(bt){var bs=this;bs.scale(bs.imageData.scaleX,bt);return bs},play:function q(){var bs=this;var bu=bs.options;var bv=bs.player;var by=G(bs.loadImage,bs);var bx=[];var bw=0;var bt=0;if(!bs.visible||bs.played){return bs}if(bu.fullscreen){bs.requestFullscreen()}bs.played=true;be(bv,"viewer-show");bo(bs.items,function(bB,bA){var bz=bq(bB,"img")[0];var bC=document.createElement("img");bC.src=bm(bz,"originalUrl");bC.alt=bz.getAttribute("alt");bw++;be(bC,"viewer-fade");A(bC,"viewer-transition",bu.transition);if(br(bB,"viewer-active")){be(bC,"viewer-in");bt=bA}bx.push(bC);a(bC,"load",by,true);a1(bv,bC)});if(X(bu.interval)&&bu.interval>0){(function(){var bz=function bz(){bs.playing=setTimeout(function(){bj(bx[bt],"viewer-in");bt++;bt=bt<bw?bt:0;be(bx[bt],"viewer-in");bz()},bu.interval)};if(bw>1){bz()}})()}return bs},stop:function aP(){var bs=this;var bt=bs.player;if(!bs.played){return bs}if(bs.options.fullscreen){bs.exitFullscreen()}bs.played=false;clearTimeout(bs.playing);bj(bt,"viewer-show");a4(bt);return bs},full:function bb(){var bs=this;var bt=bs.options;var bw=bs.viewer;var bv=bs.image;var bu=bs.list;if(!bs.visible||bs.played||bs.fulled||!bt.inline){return bs}bs.fulled=true;bs.open();be(bs.button,"viewer-fullscreen-exit");if(bt.transition){bj(bv,"viewer-transition");bj(bu,"viewer-transition")}be(bw,"viewer-fixed");bw.setAttribute("style","");H(bw,{zIndex:bt.zIndex});bs.initContainer();bs.viewerData=au({},bs.containerData);bs.renderList();bs.initImage(function(){bs.renderImage(function(){if(bt.transition){setTimeout(function(){be(bv,"viewer-transition");be(bu,"viewer-transition")},0)}})});return bs},exit:function v(){var bs=this;var bt=bs.options;var bw=bs.viewer;var bv=bs.image;var bu=bs.list;if(!bs.fulled){return bs}bs.fulled=false;bs.close();bj(bs.button,"viewer-fullscreen-exit");if(bt.transition){bj(bv,"viewer-transition");bj(bu,"viewer-transition")}bj(bw,"viewer-fixed");H(bw,{zIndex:bt.zIndexInline});bs.viewerData=au({},bs.parentData);bs.renderViewer();bs.renderList();bs.initImage(function(){bs.renderImage(function(){if(bt.transition){setTimeout(function(){be(bv,"viewer-transition");be(bu,"viewer-transition")},0)}})});return bs},tooltip:function x(){var bs=this;var bu=bs.options;var bt=bs.tooltipBox;var bv=bs.imageData;if(!bs.viewed||bs.played||!bu.tooltip){return bs}M(bt,Math.round(bv.ratio*100)+"%");if(!bs.tooltiping){if(bu.transition){if(bs.fading){aD(bt,"transitionend")}be(bt,"viewer-show");be(bt,"viewer-fade");be(bt,"viewer-transition");b(bt);be(bt,"viewer-in")}else{be(bt,"viewer-show")}}else{clearTimeout(bs.tooltiping)}bs.tooltiping=setTimeout(function(){if(bu.transition){a(bt,"transitionend",function(){bj(bt,"viewer-show");bj(bt,"viewer-fade");bj(bt,"viewer-transition");bs.fading=false},true);bj(bt,"viewer-in");bs.fading=true}else{bj(bt,"viewer-show")}bs.tooltiping=false},1000);return bs},toggle:function aq(){var bs=this;if(bs.imageData.ratio===1){bs.zoomTo(bs.initialImageData.ratio,true)}else{bs.zoomTo(1,true)}return bs},reset:function al(){var bs=this;if(bs.viewed&&!bs.played){bs.imageData=au({},bs.initialImageData);bs.renderImage()}return bs},update:function N(){var bs=this;var bu=[];if(bs.isImg&&!bs.element.parentNode){return bs.destroy()}bs.length=bs.images.length;if(bs.ready){bo(bs.items,function(bx,bw){var bv=bq(bx,"img")[0];var by=bs.images[bw];if(by){if(by.src!==bv.src){bu.push(bw)}}else{bu.push(bw)}});H(bs.list,{width:"auto"});bs.initList();if(bs.visible){if(bs.length){if(bs.viewed){var bt=z(bs.index,bu);if(bt>=0){bs.viewed=false;bs.view(Math.max(bs.index-(bt+1),0))}else{be(bs.items[bs.index],"viewer-active")}}}else{bs.image=null;bs.viewed=false;bs.index=0;bs.imageData=null;a4(bs.canvas);a4(bs.title)}}}return bs},destroy:function f(){var bs=this;var bt=bs.element;if(bs.options.inline){bs.unbind()}else{if(bs.visible){bs.unbind()}F(bt,"click",bs.onStart)}bs.unbuild();Z(bt,"viewer");return bs}};var ba={open:function T(){var bs=this.body;be(bs,"viewer-open");bs.style.paddingRight=this.scrollbarWidth+"px"},close:function ab(){var bs=this.body;bj(bs,"viewer-open");bs.style.paddingRight=0},shown:function aF(){var bs=this;var bt=bs.options;var bu=bs.element;bs.transitioning=false;bs.fulled=true;bs.visible=true;bs.render();bs.bind();if(a3(bt.shown)){a(bu,"shown",bt.shown,true)}aD(bu,"shown")},hidden:function bi(){var bs=this;var bt=bs.options;var bu=bs.element;bs.transitioning=false;bs.viewed=false;bs.fulled=false;bs.visible=false;bs.unbind();bs.close();be(bs.viewer,"viewer-hide");bs.resetList();bs.resetImage();if(a3(bt.hidden)){a(bu,"hidden",bt.hidden,true)}aD(bu,"hidden")},requestFullscreen:function am(){var bs=this;var bt=document.documentElement;if(bs.fulled&&!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(bt.requestFullscreen){bt.requestFullscreen()}else{if(bt.msRequestFullscreen){bt.msRequestFullscreen()}else{if(bt.mozRequestFullScreen){bt.mozRequestFullScreen()}else{if(bt.webkitRequestFullscreen){bt.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}},exitFullscreen:function aL(){var bs=this;if(bs.fulled){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}},change:function aE(bv){var bu=this;var bt=bu.pointers;var bw=bt[Object.keys(bt)[0]];var bs=bw.endX-bw.startX;var bx=bw.endY-bw.startY;switch(bu.action){case"move":bu.move(bs,bx);break;case"zoom":bu.zoom(bh(bt),false,bv);break;case"switch":bu.action="switched";if(Math.abs(bs)>Math.abs(bx)){if(bs>1){bu.prev()}else{if(bs<-1){bu.next()}}}break}bo(bt,function(by){by.startX=by.endX;by.startY=by.endY})},isSwitchable:function aR(){var bs=this;var bu=bs.imageData;var bt=bs.viewerData;return bs.length>1&&bu.left>=0&&bu.top>=0&&bu.width<=bt.width&&bu.height<=bt.height}};var ar=typeof document.createElement("viewer").style.transition!=="undefined";var ag=void 0;var ai=function(){function bv(bB,bA){j(this,bv);var bz=this;bz.element=bB;bz.options=au({},bc,I(bA)&&bA);bz.isImg=false;bz.ready=false;bz.visible=false;bz.viewed=false;bz.fulled=false;bz.played=false;bz.wheeling=false;bz.playing=false;bz.fading=false;bz.tooltiping=false;bz.transitioning=false;bz.action=false;bz.target=false;bz.timeout=false;bz.index=0;bz.length=0;bz.pointers={};bz.init()}bl(bv,[{key:"init",value:function bx(){var bA=this;var bB=bA.options;var bC=bA.element;if(bm(bC,"viewer")){return}aY(bC,"viewer",bA);var bE=bC.tagName.toLowerCase()==="img";var bz=bE?[bC]:bq(bC,"img");var bD=bz.length;if(!bD){return}if(a3(bB.ready)){a(bC,"ready",bB.ready,true)}if(!ar){bB.transition=false}bA.isImg=bE;bA.length=bD;bA.count=0;bA.images=bz;bA.body=document.body;bA.scrollbarWidth=window.innerWidth-document.body.clientWidth;if(bB.inline){(function(){var bF=G(bA.progress,bA);a(bC,"ready",function(){bA.view()},true);bo(bz,function(bG){if(bG.complete){bF()}else{a(bG,"load",bF,true)}})})()}else{a(bC,"click",bA.onStart=G(bA.start,bA))}}},{key:"progress",value:function bu(){var bz=this;bz.count++;if(bz.count===bz.length){bz.build()}}},{key:"build",value:function bw(){var bI=this;var bJ=bI.options;var bA=bI.element;if(bI.ready){return}var bH=document.createElement("div");var bG=void 0;var bB=void 0;var bC=void 0;var bF=void 0;var bz=void 0;var bE=void 0;bH.innerHTML=aZ;bI.parent=bG=bA.parentNode;bI.viewer=bB=bk(bH,"viewer-container")[0];bI.canvas=bk(bB,"viewer-canvas")[0];bI.footer=bk(bB,"viewer-footer")[0];bI.title=bE=bk(bB,"viewer-title")[0];bI.toolbar=bF=bk(bB,"viewer-toolbar")[0];bI.navbar=bz=bk(bB,"viewer-navbar")[0];bI.button=bC=bk(bB,"viewer-button")[0];bI.tooltipBox=bk(bB,"viewer-tooltip")[0];bI.player=bk(bB,"viewer-player")[0];bI.list=bk(bB,"viewer-list")[0];be(bE,!bJ.title?"viewer-hide":aj(bJ.title));be(bF,!bJ.toolbar?"viewer-hide":aj(bJ.toolbar));be(bz,!bJ.navbar?"viewer-hide":aj(bJ.navbar));A(bC,"viewer-hide",!bJ.button);A(bF.querySelector(".viewer-one-to-one"),"viewer-invisible",!bJ.zoomable);A(bF.querySelectorAll('li[class*="zoom"]'),"viewer-invisible",!bJ.zoomable);A(bF.querySelectorAll('li[class*="flip"]'),"viewer-invisible",!bJ.scalable);if(!bJ.rotatable){var bD=bF.querySelectorAll('li[class*="rotate"]');be(bD,"viewer-invisible");a1(bF,bD)}if(bJ.inline){be(bC,"viewer-fullscreen");H(bB,{zIndex:bJ.zIndexInline});if(aM(bG).position==="static"){H(bG,{position:"relative"})}bG.insertBefore(bB,bA.nextSibling)}else{be(bC,"viewer-close");be(bB,"viewer-fixed");be(bB,"viewer-fade");be(bB,"viewer-hide");H(bB,{zIndex:bJ.zIndex});document.body.appendChild(bB)}if(bJ.inline){bI.render();bI.bind();bI.visible=true}bI.ready=true;aD(bA,"ready")}},{key:"unbuild",value:function bs(){var bz=this;if(!bz.ready){return}bz.ready=false;aV(bz.viewer)}}],[{key:"noConflict",value:function bt(){window.Viewer=ag;return bv}},{key:"setDefaults",value:function by(bz){au(bc,I(bz)&&bz)}}]);return bv}();au(ai.prototype,ac);au(ai.prototype,D);au(ai.prototype,d);au(ai.prototype,a2);au(ai.prototype,ba);if(typeof window!=="undefined"){ag=window.Viewer;window.Viewer=ai}return ai})));